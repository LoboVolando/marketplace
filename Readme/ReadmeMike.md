#Баннер

Три рандомных баннера закэшированы на 10 минут.
Баннер привязан к товарной скидке отношением 1-к-1


#Корзина

Добавление товара в корзину происходит с любой страницы, где есть товары, по нажатию на иконку с сумкой
В корзину добавляется 1 шт. этого товара. Если в корзине уже есть этот товар, то его количество увеличивается на 1 шт.
При этом количество товара в магазине уменьшается на 1 шт. Если товара в магазине нет, он не добавляется в корзину и не списывается
из магазина.

На странице самой корзины можно изменить количество товара. Например была 1 шт, а мы хотим купить 3.
При нахажатии на udate количество меняется с 1 на 3. При этом из магазина списывается 2 единицы товара.
Если товара в магазине не достаточно, в корзине остается старое количество товара.

Если этот товар продается в другом магазине, то в корзине можно выбрать другой магазин. При обновлении
(update) количество товара в старом магазине увеличится, в новом - спишется, при условии, что товара
в новом магазине длстаточно.

Если в корзине лежит один и тот же товар, но из разных магазинов и мы меняем один из магазинов на другой,
то количество складывается, а вторая позиция удаляется из корзины.

Также при удалении товара из корзины, количество этого товара возвращается в магазин.

При логине анонимного пользователя товары из корзины "сливаются" с корзиной пользователя,
если до этого он был залогинен и собирал корзину.

При регистрации анонима, корзина также "перетекает" в корзину залогиненного пользователя.

Демонстрация добавления, удаления и изменения количества товара в корзине, а также демонстраиция
слияния корзин.

#Заказ и оплата

При нажатии на заказ из корзины, если пользователь не залогинен, он может зарегистрироваться или залогиниться.
В заказ попадают товары с финальной ценой после примененных скидок. На втором шаге оформления заказа выбирается
вид доставки, заполняется адрес и город

На третьем шаге выбирается способ оплаты: картой или рандомным счетом.
На четвертом шаге заказ получает статус оформлен. Выводится вся информация по заказу, сумма доставки и общая сумма с учетом доставки
Сумма доставки расчитывается исходя из финальной суммы заказа и типа доставки.

При выбранной оплате картой, предлагается ввести номер карты, CVV и дату действия карты. Оплата симулируется через сторонний сервис Braintree
При удачной оплате, происходит переход на страницу об успешной оплате и статус заказа меняется на "оплаченный"

При неудачной оплате, происходит переход на страницу об ошибке и заказ остается неоплаченным.

При оплате счетом, происходит валидация счета сервисом оплаты и аналогично как с картой.
Можно также обратится к сервису оплаты API запросом. Например из бота.

Есть две команды: получение статуса указанного заказа или оплата указанного заказа рандомным счетом
Валидация аналогична как при оплате с сайта.

Возможные статусы заказа: paid, not paid.
При отсутствии заказа с указанным номером, вместо статуса будет сообщение, что такого заказа нет.

Если оплата прошла, приходит сообщение: payment processed.
При любых ошибках валидации или отсутствии заказа с таким номером: payment not processed.
Демонстрация оформления.